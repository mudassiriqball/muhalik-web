{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Form, Row, Accordion, Col, Card, InputGroup, Button, Spinner } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faListAlt, faSlidersH } from '@fortawesome/free-solid-svg-icons';\nimport { faThumbsUp, faThumbsDown } from '@fortawesome/free-regular-svg-icons';\nimport React, { Component } from 'react';\nimport MuhalikConfig from '../../../../../../sdk/muhalik.config';\nimport GlobalStyleSheet from '../../../../.././../styleSheet';\nimport axios from 'axios';\nimport AlertModal from '../../../../alert-modal';\nlet categoryArray = [];\n\nclass ProducCategories extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleCategoryRequestChange\", (e, index) => {\n      let copyArray = [];\n      copyArray = Object.assign([], this.state.categoryRequestList);\n      copyArray[index].value = e.target.value;\n\n      if (e.target.value != '' && e.target.value.length <= 20 && e.target.value.length >= 3) {\n        copyArray[index].error = '';\n      } else {\n        copyArray[index].error = 'Value must be 3-20 characters';\n      }\n\n      this.setState({\n        categoryRequestList: copyArray\n      });\n    });\n\n    _defineProperty(this, \"handleCategoryChange\", (e, index) => {\n      let copyArray = [];\n      copyArray = Object.assign([], this.state.categoryList);\n      copyArray[index].value = e.target.value;\n\n      if (e.target.value != '' && e.target.value.length <= 20 && e.target.value.length >= 3) {\n        copyArray[index].error = '';\n      } else {\n        copyArray[index].error = 'Value must be 3-20 characters';\n      }\n\n      this.setState({\n        categoryList: copyArray\n      });\n    });\n\n    _defineProperty(this, \"handleDeleteCategoryClick\", index => {\n      let copyArray = [];\n      copyArray = Object.assign([], this.state.categoryList);\n      categoryArray.forEach((element, i) => {\n        if (copyArray[index].value == element.value) {\n          categoryArray.splice(index, 1);\n        }\n      });\n      copyArray.splice(index, 1);\n      this.setState({\n        categoryList: copyArray,\n        showModalMessage: 'Product Category Deleted',\n        showModal: true\n      });\n    });\n\n    this.state = {\n      isLoading: false,\n      showToast: false,\n      categoryValue: '',\n      subCategoryValue: '',\n      subSubCategoryValue: '',\n      categoryError: '',\n      subCategoryError: '',\n      subSubCategoryError: '',\n      categoryList: [],\n      categoryRequestList: [],\n      editRequestedCategory: '',\n      showModalMessage: '',\n      showModal: false,\n      filterStr: ''\n    };\n  } // Getting Product Categories from DB\n\n\n  async componentDidMount() {\n    const url = MuhalikConfig.PATH + '/api/products-categories/get-all';\n\n    try {\n      const response = await axios.get(url);\n      let copyArray = [];\n      copyArray = response.data.data;\n      copyArray.forEach((data, index) => {\n        data.label = true;\n      });\n      this.setState({\n        categoryList: copyArray\n      });\n      this.setState({\n        categoryRequestList: this.state.categoryList\n      });\n      categoryArray = copyArray;\n    } catch (error) {\n      console.log('feror:', error);\n    }\n  }\n\n  async addCategory() {\n    let data = [];\n    data = {\n      category: this.state.categoryValue,\n      sub_category: this.state.subCategoryValue,\n      sub_sub_Category: this.state.subSubCategoryValue\n    }; // const url = MuhalikConfig.PATH + '/api/products/add';\n    // await axios.post(url, {\n    //      data\n    // }, {\n    //     headers: { 'authorization': await getUncodededTokenFromStorage() }\n    // }).then(function (response) {\n\n    this.setState({\n      isLoading: false\n    });\n    this.setState({\n      showModalMessage: 'Product Category Added Successfully'\n    });\n    this.setState({\n      showModal: true\n    });\n    return true; // }).catch(function (error) {\n    //     currentComponent.setState({ isLoading: false });\n    //     alert('Error: ', error.response.data.message);\n    //     return false;\n    // });\n  }\n\n  handleFilterStrChange(e) {\n    this.setState({\n      filterStr: e.target.value\n    });\n\n    if (e.target.value == '') {\n      this.setState({\n        categoryList: categoryArray\n      });\n    } else {\n      let array = [];\n      this.state.categoryList.filter(function (data) {\n        // var value = data.value.toLowerCase;\n        if (data.value.includes(e.target.value)) {\n          array.push(data);\n        }\n      });\n      this.setState({\n        categoryList: array\n      });\n    }\n  }\n\n  handleSubmit() {\n    if (this.state.categoryValue == '' || this.state.subCategoryValue == '' || this.state.subSubCategoryValue == '') {\n      if (this.state.categoryValue == '') {\n        this.setState({\n          categoryError: 'Enter Value First'\n        });\n      }\n\n      if (this.state.subCategoryValue == '') {\n        this.setState({\n          subCategoryError: 'Enter Value First'\n        });\n      }\n\n      if (this.state.subSubCategoryValue == '') {\n        this.setState({\n          subSubCategoryError: 'Enter Value First'\n        });\n      }\n    } else {\n      this.setState({\n        isLoading: true\n      });\n      this.addCategory(this);\n    }\n  } // Category Request \n  // => Field Value \n\n\n  //  => Edit\n  async handleEditCategoryRequestClick(index) {\n    let copyArray = [];\n    copyArray = Object.assign([], this.state.categoryRequestList);\n    var obj = {};\n    obj['value'] = copyArray[index].value;\n    obj['label'] = false;\n    obj['prevVal'] = copyArray[index].value;\n    obj['error'] = '';\n    copyArray[index] = obj;\n    await this.setState({\n      categoryRequestList: copyArray\n    });\n  } //  => Cancle\n\n\n  handleCancelCategoryRequestClick(index) {\n    let copyArray = [];\n    copyArray = Object.assign([], this.state.categoryRequestList);\n    copyArray[index].value = copyArray[index].prevVal;\n    copyArray[index].label = true;\n    copyArray[index].error = '';\n    this.setState({\n      categoryRequestList: copyArray\n    });\n  } // Update\n\n\n  handleUpdateCategoryRequestClick(index) {\n    let copyArray = [];\n    copyArray = Object.assign([], this.state.categoryRequestList);\n\n    if (copyArray[index].value == copyArray[index].prevVal) {\n      copyArray[index].error = 'Enter Different Value';\n      this.setState({\n        categoryRequestList: copyArray\n      });\n    } else {\n      if (copyArray[index].error == '') {\n        copyArray[index].label = true;\n        this.setState({\n          categoryRequestList: copyArray,\n          showModalMessage: 'Product Category Updated Successfully',\n          showModal: true\n        });\n      }\n    }\n  } //  => Add\n\n\n  handleAddCategoryRequestClick(index) {\n    let copyArray = [];\n    copyArray = Object.assign([], this.state.categoryRequestList);\n    copyArray.splice(index, 1);\n    this.setState({\n      categoryRequestList: copyArray,\n      showModalMessage: 'Product Category Added Successfully',\n      showModal: true\n    });\n  } //  => Delete\n\n\n  handleDeleteCategoryRequestClick(index) {\n    let copyArray = [];\n    copyArray = Object.assign([], this.state.categoryRequestList);\n    copyArray.splice(index, 1);\n    this.setState({\n      categoryRequestList: copyArray,\n      showModalMessage: 'Product Category Deleted',\n      showModal: true\n    });\n  } // All categories\n  //  => Chane\n\n\n  //  => Edit\n  async handleEditCategoryClick(index) {\n    let copyArray = [];\n    copyArray = Object.assign([], this.state.categoryList);\n    var obj = {};\n    obj['value'] = copyArray[index].value;\n    obj['label'] = false;\n    obj['prevVal'] = copyArray[index].value;\n    obj['error'] = '';\n    copyArray[index] = obj;\n    await this.setState({\n      categoryList: copyArray\n    });\n  } //  => Cancle\n\n\n  handleCancelCategoryClick(index) {\n    let copyArray = [];\n    copyArray = Object.assign([], this.state.categoryList);\n    copyArray[index].value = copyArray[index].prevVal;\n    copyArray[index].error = '';\n    copyArray[index].label = true;\n    this.setState({\n      categoryList: copyArray\n    });\n  } //  => Update\n\n\n  handleUpdateCategoryClick(index) {\n    let copyArray = [];\n    copyArray = Object.assign([], this.state.categoryList);\n\n    if (copyArray[index].value == copyArray[index].prevVal) {\n      copyArray[index].error = 'Enter Different Value';\n      this.setState({\n        categoryRequestList: copyArray\n      });\n    } else {\n      if (copyArray[index].error == '') {\n        copyArray[index].label = true;\n        categoryArray.forEach((element, i) => {\n          if (copyArray[index].prevVal == element.value) {\n            element.value = copyArray[index].value;\n          }\n        });\n        this.setState({\n          categoryList: copyArray,\n          showModalMessage: 'Product Category Updated Successfully',\n          showModal: true\n        });\n      }\n    }\n  } //  => Delete\n\n\n  render() {\n    return __jsx(React.Fragment, null, __jsx(AlertModal, {\n      onHide: e => this.setState({\n        showModal: false\n      }),\n      show: this.state.showModal,\n      header: 'Success',\n      message: this.state.showModalMessage,\n      iconName: faThumbsUp,\n      color: \"#00b300\"\n    }), __jsx(Row, {\n      style: styles.title_row,\n      noGutters: true\n    }, __jsx(FontAwesomeIcon, {\n      icon: faListAlt,\n      style: styles.title_fontawesome\n    }), __jsx(\"div\", {\n      className: \"mr-auto\",\n      style: styles.title\n    }, \" Product Categories \")), __jsx(Row, {\n      noGutters: true\n    }, __jsx(Accordion, {\n      style: {\n        width: '100%'\n      },\n      defaultActiveKey: \"0\"\n    }, __jsx(Card, {\n      style: styles.card\n    }, __jsx(Card.Header, null, __jsx(Form.Label, null, \"Add New Category \"), __jsx(Accordion.Toggle, {\n      as: Button,\n      size: \"sm\",\n      eventKey: \"0\",\n      style: {\n        float: 'right',\n        background: 'none'\n      }\n    }, __jsx(FontAwesomeIcon, {\n      size: \"xs\",\n      icon: faSlidersH,\n      style: styles.accordin_fontawesome\n    }))), __jsx(Accordion.Collapse, {\n      eventKey: \"0\"\n    }, __jsx(Card.Body, {\n      style: styles.card_body\n    }, __jsx(Form.Row, null, __jsx(Form.Group, {\n      as: Col,\n      lg: 4,\n      md: 4,\n      sm: 4,\n      xs: 12\n    }, __jsx(Form.Label, {\n      style: styles.label\n    }, \"Category\"), __jsx(InputGroup, null, __jsx(Form.Control, {\n      type: \"text\",\n      size: \"sm\",\n      placeholder: \"Enter Category Value\",\n      name: \"sku\",\n      value: this.state.categoryValue,\n      onChange: e => this.setState({\n        categoryValue: e.target.value,\n        categoryError: ''\n      }),\n      isInvalid: this.state.categoryError\n    }), __jsx(Form.Control.Feedback, {\n      type: \"invalid\"\n    }, this.state.categoryError))), __jsx(Form.Group, {\n      as: Col,\n      lg: 4,\n      md: 4,\n      sm: 4,\n      xs: 12\n    }, __jsx(Form.Label, {\n      style: styles.label\n    }, \"Sub Category\"), __jsx(InputGroup, null, __jsx(Form.Control, {\n      type: \"text\",\n      size: \"sm\",\n      placeholder: \"Enter Category Value\",\n      name: \"sku\",\n      value: this.state.subCategoryValue,\n      onChange: e => this.setState({\n        subCategoryValue: e.target.value,\n        subCategoryError: ''\n      }),\n      isInvalid: this.state.subCategoryError\n    }), __jsx(Form.Control.Feedback, {\n      type: \"invalid\"\n    }, this.state.subCategoryError))), __jsx(Form.Group, {\n      as: Col,\n      lg: 4,\n      md: 4,\n      sm: 4,\n      xs: 12\n    }, __jsx(Form.Label, {\n      style: styles.label\n    }, \"Sub Sub Category\"), __jsx(InputGroup, null, __jsx(Form.Control, {\n      type: \"text\",\n      size: \"sm\",\n      placeholder: \"Enter Category Value\",\n      name: \"sku\",\n      value: this.state.subSubCategoryValue,\n      onChange: e => this.setState({\n        subSubCategoryValue: e.target.value,\n        subSubCategoryError: ''\n      }),\n      isInvalid: this.state.subSubCategoryError\n    }), __jsx(Form.Control.Feedback, {\n      type: \"invalid\"\n    }, this.state.subSubCategoryError)))), __jsx(Form.Group, null, __jsx(Button, {\n      type: \"submit\",\n      size: \"sm\",\n      onClick: this.handleSubmit.bind(this),\n      disabled: this.state.isLoading,\n      block: true,\n      style: styles.submit_btn\n    }, this.state.isLoading ? 'Uploading' : 'Add Category', this.state.isLoading ? __jsx(Spinner, {\n      animation: \"grow\",\n      size: \"sm\"\n    }) : null))))))), __jsx(Row, {\n      noGutters: true\n    }, __jsx(Accordion, {\n      style: {\n        width: '100%'\n      },\n      defaultActiveKey: \"0\"\n    }, __jsx(Card, {\n      style: styles.card\n    }, __jsx(Card.Header, null, __jsx(Form.Label, null, \"Add Category Requests\"), __jsx(Accordion.Toggle, {\n      as: Button,\n      size: \"sm\",\n      eventKey: \"0\",\n      style: {\n        float: 'right',\n        background: 'none'\n      }\n    }, __jsx(FontAwesomeIcon, {\n      size: \"xs\",\n      icon: faSlidersH,\n      style: styles.accordin_fontawesome\n    }))), __jsx(Accordion.Collapse, {\n      eventKey: \"0\"\n    }, __jsx(Card.Body, {\n      style: styles.card_body\n    }, this.state.categoryRequestList.map((data, index) => __jsx(Form.Row, null, __jsx(Form.Group, {\n      as: Col,\n      lg: 2,\n      md: 2,\n      sm: 6,\n      xs: 12\n    }, __jsx(Form.Control, {\n      type: \"text\",\n      size: \"sm\",\n      placeholder: \"Enter Category Value\",\n      name: \"sku\",\n      value: data.value,\n      disabled: true\n    })), __jsx(Form.Group, {\n      as: Col,\n      lg: 2,\n      md: 2,\n      sm: 6,\n      xs: 12\n    }, __jsx(Form.Control, {\n      type: \"text\",\n      size: \"sm\",\n      placeholder: \"Enter Category Value\",\n      name: \"sku\",\n      value: data.value,\n      disabled: true\n    })), __jsx(\"div\", {\n      className: \"mr-auto\"\n    }), __jsx(Form.Group, {\n      as: Col,\n      lg: 4,\n      md: 4,\n      sm: 6,\n      xs: 12\n    }, __jsx(InputGroup, null, __jsx(Form.Control, {\n      type: \"text\",\n      size: \"sm\",\n      placeholder: \"Enter Category Value\",\n      name: \"sku\",\n      value: data.value,\n      onChange: e => this.handleCategoryRequestChange(e, index),\n      isInvalid: data.error,\n      disabled: data.label\n    }), __jsx(Form.Control.Feedback, {\n      type: \"invalid\"\n    }, data.error))), __jsx(\"div\", {\n      className: \"mr-auto\"\n    }), __jsx(Form.Group, {\n      as: Col,\n      lg: \"auto\",\n      md: \"auto\",\n      sm: \"auto\",\n      xs: \"auto\"\n    }, __jsx(Button, {\n      type: \"submit\",\n      variant: \"outline-success\",\n      size: \"sm\",\n      block: true,\n      style: styles.submit_btn,\n      onClick: () => data.label ? this.handleEditCategoryRequestClick(index) : this.handleUpdateCategoryRequestClick(index)\n    }, __jsx(\"div\", null, data.label ? 'Edit' : 'Update'))), __jsx(Form.Group, {\n      as: Col,\n      lg: \"auto\",\n      md: \"auto\",\n      sm: \"auto\",\n      xs: \"auto\"\n    }, __jsx(Button, {\n      type: \"submit\",\n      variant: \"outline-primary\",\n      size: \"sm\",\n      block: true,\n      style: styles.submit_btn,\n      onClick: () => {\n        data.label ? this.handleAddCategoryRequestClick(index) : this.handleCancelCategoryRequestClick(index);\n      }\n    }, __jsx(\"div\", null, data.label ? 'Add' : 'Cancel'))), __jsx(\"div\", {\n      className: \"mr-auto\"\n    }), __jsx(Form.Group, {\n      as: Col,\n      lg: \"auto\",\n      md: \"auto\",\n      sm: \"auto\",\n      xs: \"auto\"\n    }, __jsx(Button, {\n      type: \"submit\",\n      variant: \"outline-danger\",\n      size: \"sm\",\n      block: true,\n      style: styles.submit_btn,\n      onClick: () => this.handleDeleteCategoryRequestClick(index)\n    }, __jsx(\"div\", null, \"Discard\")))))))))), __jsx(Row, {\n      noGutters: true\n    }, __jsx(Accordion, {\n      style: {\n        width: '100%'\n      },\n      defaultActiveKey: \"0\"\n    }, __jsx(Card, {\n      style: styles.card\n    }, __jsx(Card.Header, null, __jsx(Form.Label, null, \"All Categories\"), __jsx(Accordion.Toggle, {\n      as: Button,\n      size: \"sm\",\n      eventKey: \"0\",\n      style: {\n        float: 'right',\n        background: 'none'\n      }\n    }, __jsx(FontAwesomeIcon, {\n      size: \"xs\",\n      icon: faSlidersH,\n      style: styles.accordin_fontawesome\n    }))), __jsx(Accordion.Collapse, {\n      eventKey: \"0\"\n    }, __jsx(Card.Body, {\n      style: styles.card_body\n    }, __jsx(Form.Row, {\n      style: {\n        margin: '0% 5%'\n      }\n    }, __jsx(Form.Group, {\n      as: Col\n    }, __jsx(InputGroup, null, __jsx(Form.Control, {\n      type: \"text\",\n      size: \"sm\",\n      placeholder: \"Enter Category Value\",\n      name: \"sku\",\n      value: this.state.filterStr,\n      onChange: e => this.handleFilterStrChange(e)\n    })))), __jsx(\"hr\", null), this.state.categoryList.map((data, index) => __jsx(Form.Row, null, __jsx(Form.Group, {\n      as: Col,\n      lg: 8,\n      md: 8,\n      sm: 12,\n      xs: 12\n    }, __jsx(InputGroup, null, __jsx(Form.Control, {\n      type: \"text\",\n      size: \"sm\",\n      placeholder: \"Enter Category Value\",\n      name: \"sku\",\n      value: data.value,\n      onChange: e => this.handleCategoryChange(e, index),\n      disabled: data.label,\n      isInvalid: data.error\n    }), __jsx(Form.Control.Feedback, {\n      type: \"invalid\"\n    }, data.error))), __jsx(Form.Group, {\n      as: Col,\n      lg: 1,\n      md: 1,\n      sm: \"auto\",\n      xs: \"auto\"\n    }, __jsx(Button, {\n      type: \"submit\",\n      variant: \"outline-success\",\n      size: \"sm\",\n      block: true,\n      style: styles.submit_btn,\n      onClick: data.label ? () => this.handleEditCategoryClick(index) : () => this.handleUpdateCategoryClick(index)\n    }, __jsx(\"div\", null, data.label ? 'Edit' : 'Update'))), __jsx(\"div\", {\n      className: \"mr-auto\"\n    }), __jsx(Form.Group, {\n      as: Col,\n      lg: 2,\n      md: 2,\n      sm: \"auto\",\n      xs: \"auto\"\n    }, __jsx(Button, {\n      type: \"submit\",\n      variant: data.label ? \"outline-danger\" : \"outline-primary\",\n      size: \"sm\",\n      block: true,\n      style: styles.submit_btn,\n      onClick: data.label ? () => this.handleDeleteCategoryClick(index) : () => this.handleCancelCategoryClick(index)\n    }, __jsx(\"div\", null, data.label ? 'Delete' : 'Cancel')))))))))));\n  }\n\n}\n\nconst styles = {\n  title_row: {\n    borderBottom: '1px solid gray',\n    padding: '1.5% 4%'\n  },\n  title_fontawesome: {\n    color: 'gray',\n    marginRight: '3%',\n    width: '26px',\n    height: '26px',\n    maxHeight: '26px',\n    maxWidth: '26px'\n  },\n  title: {\n    color: 'gray'\n  },\n  card: {\n    // width: '100%',\n    margin: '2%'\n  },\n  card_body: {// padding: '5%'\n  },\n  label: {\n    fontSize: `${GlobalStyleSheet.form_label_fontsize}`\n  },\n  error: {\n    width: '100%',\n    textAlign: 'center',\n    color: '#DC3545',\n    fontSize: '14px'\n  },\n  accordin_fontawesome: {\n    color: `${GlobalStyleSheet.admin_primry_color}`,\n    marginRight: '10%',\n    width: '15px',\n    height: '15px',\n    maxHeight: '15px',\n    maxWidth: '15px'\n  }\n};\nexport default ProducCategories;","map":null,"metadata":{},"sourceType":"module"}