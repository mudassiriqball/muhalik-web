{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _styles;\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport axios from 'axios';\nimport { Navbar, Container, Form, Col, Row, InputGroup, Button, Image, Spinner } from 'react-bootstrap';\nimport { Formik } from 'formik';\nimport * as yup from 'yup';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEye, faEyeSlash } from '@fortawesome/free-solid-svg-icons';\nimport { faThumbsUp } from '@fortawesome/free-solid-svg-icons';\nimport ShowToast from './components/toast';\nimport GlobalStyleSheet from '../styleSheet';\nimport MuhalikConfig from '../sdk/muhalik.config'; // RegEx for phone number validation\n\nvar phoneRegExp = /^(\\+?\\d{0,4})?\\s?-?\\s?(\\(?\\d{3}\\)?)\\s?-?\\s?(\\(?\\d{3}\\)?)\\s?-?\\s?(\\(?\\d{4}\\)?)?$/;\nvar schema = yup.object({\n  mobile: yup.string().required(\"Enter Mobile Number\").matches(phoneRegExp, \"Phone number is not valid\"),\n  fullName: yup.string().required(\"Enter Full Name\").min(5, \"Must have at least 5 characters\").max(25, \"Can't be longer than 25 characters\"),\n  verificationCode: yup.string().required(\"Enter Verification Code\"),\n  email: yup.string().email(\"Must be a valid email address\").max(100, \"Can't be longer than 100 characters\"),\n  password: yup.string().required(\"Enter Password\").min(8, \"Password must have at least 8 characters\").max(20, \"Can't be longer than 20 characters\"),\n  confirmPassword: yup.string().required(\"Enter Confirm Password\").when(\"password\", {\n    is: function is(val) {\n      return val && val.length > 0 ? true : false;\n    },\n    then: yup.string().oneOf([yup.ref(\"password\")], \"Passwords must match\")\n  }),\n  countary: yup.string().required(\"Select Countary\"),\n  role: yup.string(),\n  city: yup.string().required(\"Enter City Name\").min(3, \"Must have at least 3 characters\").max(30, \"Can't be longer than 30 characters\")\n});\n\nvar Signup = /*#__PURE__*/function (_Component) {\n  _inherits(Signup, _Component);\n\n  var _super = _createSuper(Signup);\n\n  function Signup() {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      hide: true,\n      isLoading: false,\n      showToast: false,\n      serverErrorMsg: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showPassword\", function (ev) {\n      _this.setState({\n        hide: !_this.state.hide\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"userRegister\",\n    value: function userRegister(data, currentComponent) {\n      var url = MuhalikConfig.PATH + '/api/users/register';\n      axios.post(url, {\n        data: data\n      }).then(function (response) {\n        console.log('response:', response);\n\n        if (response.status == 200) {\n          currentComponent.setState({\n            isLoading: false\n          });\n          currentComponent.setState({\n            showToast: true\n          });\n          Router.push('/login');\n          return true;\n        }\n      })[\"catch\"](function (error) {\n        currentComponent.setState({\n          isLoading: false\n        });\n\n        if (error.response.status == 401) {\n          currentComponent.setState({\n            serverErrorMsg: 'Tis User already exists.'\n          });\n        } else {\n          alert('ERROR:' + error.response.data.message);\n        }\n\n        return false;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var hide = this.state.hide;\n      var eyeBtn;\n\n      if (this.state.hide) {\n        eyeBtn = __jsx(FontAwesomeIcon, {\n          icon: faEye,\n          style: styles.fontawesome\n        });\n      } else {\n        eyeBtn = __jsx(FontAwesomeIcon, {\n          icon: faEyeSlash,\n          style: styles.fontawesome\n        });\n      }\n\n      return __jsx(Formik, {\n        validationSchema: schema,\n        initialValues: {\n          mobile: '',\n          fullName: '',\n          verificationCode: '',\n          email: '',\n          password: '',\n          confirmPassword: '',\n          countary: 'KSA',\n          city: '',\n          role: 'customer'\n        },\n        onSubmit: function onSubmit(values, _ref) {\n          var setSubmitting = _ref.setSubmitting,\n              resetForm = _ref.resetForm;\n\n          _this2.setState({\n            isLoading: true\n          });\n\n          setSubmitting(true);\n          setTimeout(function () {\n            if (_this2.userRegister(values, _this2)) {\n              resetForm();\n            }\n\n            setSubmitting(false);\n          }, 500);\n        }\n      }, function (_ref2) {\n        var handleSubmit = _ref2.handleSubmit,\n            handleChange = _ref2.handleChange,\n            values = _ref2.values,\n            touched = _ref2.touched,\n            isValid = _ref2.isValid,\n            errors = _ref2.errors,\n            handleBlur = _ref2.handleBlur,\n            isSubmitting = _ref2.isSubmitting;\n        return __jsx(\"div\", {\n          style: styles.body,\n          className: \"jsx-1794121765\"\n        }, _this2.state.showToast ? __jsx(ShowToast, {\n          onCloseHandler: function onCloseHandler(e) {\n            return _this2.setState({\n              showToast: false\n            });\n          },\n          show: _this2.state.showToast,\n          message: 'Your Account Created Successfully',\n          iconName: faThumbsUp\n        }) : null, __jsx(Navbar, {\n          variant: \"dark\",\n          style: {\n            background: \"\".concat(GlobalStyleSheet.primry_color)\n          }\n        }, __jsx(Navbar.Brand, {\n          href: \"/\",\n          className: \"mr-auto\"\n        }, \" Muhalik \")), __jsx(Container, null, __jsx(Row, {\n          className: \"justify-content-md-center\",\n          noGutters: true\n        }, __jsx(Col, {\n          lg: \"auto\",\n          md: \"auto\",\n          sm: \"auto\",\n          xs: \"auto\",\n          style: styles.form_col\n        }, __jsx(Row, {\n          className: \"justify-content-md-center\"\n        }, __jsx(Col, {\n          lg: \"auto\",\n          md: \"auto\",\n          sm: \"auto\",\n          xs: \"auto\",\n          style: styles.register_as_shop_col\n        }, __jsx(Image, {\n          src: \"muhalik.jpg\",\n          roundedCircle: true,\n          thumbnail: true,\n          fluid: true,\n          style: styles.image\n        }), __jsx(\"h6\", {\n          className: \"jsx-1794121765\" + \" \" + \"text-center\"\n        }, \"Create Your Acount \"))), __jsx(Form, {\n          noValidate: true,\n          onSubmit: handleSubmit\n        }, __jsx(Form.Row, null, __jsx(Form.Group, {\n          as: Col,\n          md: \"6\",\n          controlId: \"validationMobile\"\n        }, __jsx(Form.Label, {\n          style: styles.label\n        }, \"Mobile Number \", __jsx(\"span\", {\n          className: \"jsx-1794121765\"\n        }, \"*\")), __jsx(InputGroup, null, __jsx(Form.Control, {\n          type: \"text\",\n          placeholder: \"+966590911891\",\n          \"aria-describedby\": \"mobile\",\n          name: \"mobile\",\n          value: values.mobile,\n          onChange: handleChange,\n          isInvalid: touched.mobile && errors.mobile\n        }), __jsx(InputGroup.Prepend, null, __jsx(Button, {\n          id: \"sndCodeBtn\",\n          style: styles.buttons\n        }, \"Send Code\")), __jsx(Form.Control.Feedback, {\n          type: \"invalid\"\n        }, errors.mobile))), __jsx(Form.Group, {\n          as: Col,\n          md: \"6\"\n        }, __jsx(Form.Label, {\n          style: styles.label\n        }, \"Full Name\", __jsx(\"span\", {\n          className: \"jsx-1794121765\"\n        }, \"*\")), __jsx(InputGroup, null, __jsx(Form.Control, {\n          type: \"text\",\n          placeholder: \"Full Name\",\n          name: \"fullName\",\n          value: values.fullName,\n          onChange: handleChange,\n          isInvalid: touched.fullName && errors.fullName\n        }), __jsx(Form.Control.Feedback, {\n          type: \"invalid\"\n        }, errors.fullName)))), __jsx(Form.Row, null, __jsx(Form.Group, {\n          as: Col,\n          md: \"6\",\n          controlId: \"validationVerificationCode\"\n        }, __jsx(Form.Label, {\n          style: styles.label\n        }, \"Verification Code\", __jsx(\"span\", {\n          className: \"jsx-1794121765\"\n        }, \" * \")), __jsx(Form.Control, {\n          type: \"text\",\n          placeholder: \"Verification Code\",\n          name: \"verificationCode\",\n          value: values.verificationCode,\n          onChange: handleChange,\n          isInvalid: touched.verificationCode && errors.verificationCode\n        }), __jsx(Form.Control.Feedback, {\n          type: \"invalid\"\n        }, errors.verificationCode)), __jsx(Form.Group, {\n          as: Col,\n          md: \"6\",\n          controlId: \"validationEmail\"\n        }, __jsx(Form.Label, {\n          style: styles.label\n        }, \"Email Address\"), __jsx(Form.Control, {\n          type: \"email\",\n          placeholder: \"mr.x@gmail.com\",\n          name: \"email\",\n          value: values.email,\n          onChange: handleChange,\n          isInvalid: touched.email && errors.email\n        }), __jsx(Form.Control.Feedback, {\n          type: \"invalid\"\n        }, errors.email))), __jsx(Form.Row, null, __jsx(Form.Group, {\n          as: Col,\n          md: 6,\n          controlId: \"validationPassword\"\n        }, __jsx(Form.Label, {\n          style: styles.label\n        }, \"Password \", __jsx(\"span\", {\n          className: \"jsx-1794121765\"\n        }, \"*\")), __jsx(InputGroup, null, __jsx(Form.Control, {\n          type: hide ? 'password' : 'text',\n          placeholder: \"Enter Password\",\n          \"aria-describedby\": \"inputGroup\",\n          name: \"password\",\n          value: values.password,\n          onChange: handleChange,\n          isInvalid: touched.password && errors.password\n        }), __jsx(InputGroup.Prepend, null, __jsx(Button, {\n          id: \"passwordEyeBtn\",\n          onClick: _this2.showPassword,\n          style: styles.buttons\n        }, eyeBtn)), __jsx(Form.Control.Feedback, {\n          type: \"invalid\"\n        }, errors.password))), __jsx(Form.Group, {\n          as: Col,\n          md: 6,\n          controlId: \"validationConfirmPassword\"\n        }, __jsx(Form.Label, {\n          style: styles.label\n        }, \"Confirm Password \", __jsx(\"span\", {\n          className: \"jsx-1794121765\"\n        }, \"*\")), __jsx(InputGroup, null, __jsx(Form.Control, {\n          type: hide ? 'password' : 'text',\n          placeholder: \"Re-enter Password\",\n          \"aria-describedby\": \"confirmPassword\",\n          name: \"confirmPassword\",\n          value: values.confirmPassword,\n          onChange: handleChange,\n          isInvalid: touched.confirmPassword && errors.confirmPassword\n        }), __jsx(InputGroup.Prepend, null, __jsx(Button, {\n          id: \"confirmPasswordEyeBtn\",\n          onClick: _this2.showPassword,\n          style: styles.buttons\n        }, eyeBtn)), __jsx(Form.Control.Feedback, {\n          type: \"invalid\"\n        }, errors.confirmPassword)))), __jsx(Form.Row, null, __jsx(Form.Label, {\n          className: \"text-center\",\n          style: styles.errorMsg\n        }, _this2.state.serverErrorMsg)), __jsx(Form.Row, null, __jsx(Form.Group, {\n          as: Col,\n          lg: 3,\n          md: 3\n        }, __jsx(Form.Label, {\n          style: styles.label\n        }, \"Countary\", __jsx(\"span\", {\n          className: \"jsx-1794121765\"\n        }, \" * \")), __jsx(Form.Control, {\n          as: \"select\",\n          \"aria-describedby\": \"countary\",\n          name: \"countary\",\n          value: values.countary,\n          onChange: handleChange,\n          isInvalid: touched.countary && errors.countary\n        }, __jsx(\"option\", {\n          className: \"jsx-1794121765\"\n        }, \"Select\"), __jsx(\"option\", {\n          className: \"jsx-1794121765\"\n        }, \" KSA \"), __jsx(\"option\", {\n          className: \"jsx-1794121765\"\n        }, \" Pak \")), __jsx(Form.Control.Feedback, {\n          type: \"invalid\"\n        }, errors.countary)), __jsx(Form.Group, {\n          as: Col,\n          lg: 4,\n          md: 4,\n          sm: 12,\n          xs: 12\n        }, __jsx(Form.Label, {\n          style: styles.label\n        }, \"City\", __jsx(\"span\", {\n          className: \"jsx-1794121765\"\n        }, \" * \")), __jsx(InputGroup, null, __jsx(Form.Control, {\n          type: \"text\",\n          placeholder: \"Enter City Name\",\n          name: \"city\",\n          value: values.city,\n          onChange: handleChange,\n          isInvalid: touched.city && errors.city\n        }), __jsx(Form.Control.Feedback, {\n          type: \"invalid\"\n        }, errors.city))), __jsx(Form.Group, {\n          as: Col,\n          lg: 5,\n          md: 5,\n          sm: 12,\n          xs: 12,\n          style: styles.term_condition_col\n        }, __jsx(Form.Label, {\n          className: \"text-center\",\n          style: styles.term_condition_label\n        }, \"By creating acount, you agree to Muhalik's\", __jsx(\"span\", {\n          className: \"jsx-1794121765\"\n        }, __jsx(Link, {\n          href: \"./help/terms-and-conditions\"\n        }, __jsx(\"a\", {\n          className: \"jsx-1794121765\"\n        }, \" Terms & Conditions \"))), \"and\", __jsx(\"span\", {\n          className: \"jsx-1794121765\"\n        }, __jsx(Link, {\n          href: \"./help/privacy-statement\"\n        }, __jsx(\"a\", {\n          className: \"jsx-1794121765\"\n        }, \" Privacy Statement \")))))), __jsx(Form.Row, null, __jsx(Form.Label, {\n          className: \"text-center\",\n          style: styles.errorMsg\n        }, _this2.state.serverErrorMsg)), __jsx(Form.Row, null, __jsx(Form.Group, {\n          as: Col,\n          controlId: \"loginGrop\"\n        }, __jsx(Form.Label, {\n          className: \"text-center\",\n          style: styles.label\n        }, \"Already have an account...\", __jsx(\"span\", {\n          className: \"jsx-1794121765\"\n        }, __jsx(Link, {\n          href: \"login\"\n        }, __jsx(\"a\", {\n          className: \"jsx-1794121765\"\n        }, \"Login\")))), __jsx(Button, {\n          type: \"submit\",\n          onSubmit: handleSubmit,\n          disabled: _this2.state.isLoading,\n          block: true,\n          style: styles.submit_btn\n        }, _this2.state.isLoading ? 'Registering' : 'Register', _this2.state.isLoading ? __jsx(Spinner, {\n          animation: \"grow\",\n          size: \"sm\"\n        }) : null))))))), __jsx(_JSXStyle, {\n          id: \"1794121765\"\n        }, [\"span.jsx-1794121765{color:red;}\", \"p.jsx-1794121765{text-align:center;margin:0px;}\"]));\n      });\n    }\n  }]);\n\n  return Signup;\n}(Component);\n\nvar styles = (_styles = {\n  body: {\n    background: \"\".concat(GlobalStyleSheet.body_color),\n    position: 'absolute',\n    top: '0',\n    left: '0',\n    right: '0',\n    minHeight: '100vh'\n  },\n  buttons: {\n    background: \"\".concat(GlobalStyleSheet.primry_color),\n    border: 'none',\n    fontSize: '10px'\n  },\n  errorMsg: {\n    color: 'red',\n    width: '100%',\n    fontSize: \"\".concat(GlobalStyleSheet.form_label_fontsize)\n  },\n  submit_btn: {\n    background: \"\".concat(GlobalStyleSheet.primry_color),\n    marginTop: '5px'\n  },\n  form_col: {\n    background: 'white',\n    padding: '20px 30px',\n    margin: '5% 0%'\n  },\n  register_as_shop_col: {\n    display: 'flex',\n    alignItems: 'center',\n    marginBottom: '2%'\n  },\n  image: {\n    width: '100px',\n    marginRight: '10px'\n  }\n}, _defineProperty(_styles, \"errorMsg\", {\n  color: 'red',\n  width: '100%',\n  fontSize: \"\".concat(GlobalStyleSheet.form_label_fontsize)\n}), _defineProperty(_styles, \"label\", {\n  width: '100%',\n  fontSize: \"\".concat(GlobalStyleSheet.form_label_fontsize)\n}), _defineProperty(_styles, \"term_condition_col\", {\n  display: 'flex',\n  alignItems: 'center',\n  margin: '0%'\n}), _defineProperty(_styles, \"term_condition_label\", {\n  width: '100%',\n  margin: '0%',\n  fontSize: \"\".concat(GlobalStyleSheet.form_label_fontsize)\n}), _defineProperty(_styles, \"fontawesome\", {\n  color: \"\".concat(GlobalStyleSheet.primary_text_color),\n  width: '15px',\n  height: '15px',\n  maxHeight: '15px',\n  maxWidth: '15px'\n}), _styles);\nexport default Signup;","map":null,"metadata":{},"sourceType":"module"}