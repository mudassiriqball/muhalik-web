{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport Link from 'next/link';\nimport { Row, Col, Card, Button } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUpload, faDownload } from '@fortawesome/free-solid-svg-icons';\nimport axios, { post } from 'axios';\nimport GlobalStyleSheet from '../../../../../styleSheet';\nimport MuhalikConfig from '../../../../../sdk/muhalik.config';\n\nclass BulkUpload extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"downloadBulkUploadTemplete\", () => {\n      fetch('/excel.xlsx').then(response => {\n        response.blob().then(blob => {\n          let url = window.URL.createObjectURL(blob);\n          let a = document.createElement('a');\n          a.href = url;\n          a.download = 'muhalik bulk-upload templete.xlsx';\n          a.click();\n        });\n      });\n    });\n\n    this.state = {\n      file: null\n    };\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.fileUpload = this.fileUpload.bind(this);\n  }\n\n  onFormSubmit(e) {\n    e.preventDefault(); // Stop form submit\n\n    this.fileUpload(this.state.file).then(response => {\n      console.log(response.data);\n    });\n  }\n\n  onChange(e) {\n    this.setState({\n      file: e.target.files[0]\n    });\n  }\n\n  async fileUpload(file) {\n    const url = MuhalikConfig.PATH + '/api/products/bulk-upload';\n    const form = new FormData();\n    form.append('file', file);\n    axios.post(url, form, {\n      headers: {\n        'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n      }\n    }).then(function (response) {\n      return response;\n    }).catch(function (error) {\n      console.log(error);\n    });\n    return \"fuck\"; // const form = new FormData()\n    // form.append('username', 'malcoded')\n    // form.append('file', file)\n    // const response = await fetch(url, {\n    //     method: 'POST',\n    //     headers: { 'Content-Type': 'multipart/form-data' },\n    //     body: form,\n    // })\n    // return response;\n    // const response = await axios.post(\n    //     url,\n    //     { example: 'data' },\n    //     { headers: { 'Content-Type': 'application/json',\"Access-Control-Allow-Origin\": \"*\"  } }\n    //   )\n\n    return response; // const form = new FormData();\n    // form.set('username', 'malcoded');\n    // form.append('file', file);\n    // return axios.post(url, file, {\n    //     headers: { 'Content-Type': 'multipart/form-data' },\n    // })\n    // const formData = new FormData();\n    // formData.append('file', file)\n    // const config = {\n    //     headers: {\n    //         \"Access-Control-Allow-Origin\": \"*\"\n    //     }\n    // }\n    // return post(url, formData, {\n    //     headers: {\n    //         'Access-Control-Allow-Origin': true,\n    //     }\n    // });\n  }\n\n  render() {\n    return __jsx(\"div\", null, __jsx(Row, {\n      style: styles.row\n    }, __jsx(\"h6\", {\n      className: \"mr-auto\"\n    }, \"Products Bulk Upload\"), __jsx(Link, {\n      href: \"/index\"\n    }, __jsx(\"a\", null, \"Home\"))), __jsx(Row, {\n      style: styles.row\n    }, __jsx(Card, {\n      style: styles.card\n    }, __jsx(Card.Header, {\n      style: {\n        background: 'skyblue'\n      }\n    }, \"Download Templete\"), __jsx(Card.Body, null, __jsx(Button, {\n      variant: \"primary\",\n      size: \"md\",\n      active: true,\n      onClick: this.downloadBulkUploadTemplete\n    }, __jsx(FontAwesomeIcon, {\n      icon: faDownload,\n      style: styles.fontawesome\n    }), \"Download\")))), __jsx(Row, {\n      style: styles.row\n    }, __jsx(Card, {\n      style: styles.card\n    }, __jsx(Card.Header, {\n      style: {\n        background: 'skyblue'\n      }\n    }, \"Upload File\"), __jsx(Card.Body, null, __jsx(\"form\", {\n      onSubmit: this.onFormSubmit\n    }, __jsx(\"div\", {\n      style: styles.browseBtnDiv\n    }, __jsx(\"input\", {\n      type: \"file\",\n      onChange: this.onChange\n    })), __jsx(\"div\", {\n      style: {\n        width: '100%'\n      }\n    }, __jsx(Button, {\n      variant: \"primary\",\n      size: \"md\",\n      active: true,\n      type: \"submit\"\n    }, __jsx(FontAwesomeIcon, {\n      icon: faUpload,\n      style: styles.fontawesome\n    }), \"Upload\")))))));\n  }\n\n}\n\nconst styles = {\n  row: {\n    margin: '2%',\n    padding: '0px'\n  },\n  card: {\n    width: '100%'\n  },\n  browseBtnDiv: {\n    width: '100%',\n    padding: '0px 0px 10px 0px'\n  },\n  fontawesome: {\n    color: 'white',\n    marginRight: '10px',\n    width: '14px',\n    height: '14px',\n    maxHeight: '14px',\n    maxWidth: '14px'\n  }\n};\nexport default BulkUpload;","map":null,"metadata":{},"sourceType":"module"}